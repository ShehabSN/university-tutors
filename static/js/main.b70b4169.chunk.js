(this["webpackJsonpuniversity-tutors"]=this["webpackJsonpuniversity-tutors"]||[]).push([[0],{282:function(e,t,n){},283:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(97),c=n.n(i),s=(n(282),n(418)),o=n(241),d=n(435),l=n(65),u=n(27),j=(n(283),n(20)),b=n(4),m=n.n(b),O=n(8),x=n(7),p=n(242),h=n(319),f=n(426),g=n(381),_=n(227),v=n(151),y=n(189),w=n.n(y),C=n(226),S=n(116),$=Object(C.a)({apiKey:"AIzaSyAMP9pP7Qh-09pkccucblvj_WTynpon4jI",authDomain:"university-tutors.firebaseapp.com",projectId:"university-tutors",storageBucket:"university-tutors.appspot.com",messagingSenderId:"263145801559",appId:"1:263145801559:web:7e47d811fc670b612aa012",measurementId:"G-NTB1VCKNJ9"}),k=Object(S.b)($),I=n(0),q=a.a.createContext(),T=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(x.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(r.useRef)(),b=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}return e.next=3,t.getIdTokenResult();case 3:if(!(n=e.sent).claims["https://hasura.io/jwt/claims"]){e.next=8;break}return e.abrupt("return",n.token);case 8:return e.next=10,w.a.get("".concat("https://us-central1-university-tutors.cloudfunctions.net/refreshToken","?uid=").concat(k.currentUser.uid));case 10:if(200!==(null===(r=e.sent)||void 0===r?void 0:r.status)){e.next=18;break}return e.next=14,k.currentUser.getIdToken(!0);case 14:return a=e.sent,e.abrupt("return",a);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),y=Object(r.useCallback)(function(){var e=Object(O.a)(m.a.mark((function e(t){var n,r,a,i,s,o,d,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===t||void 0===t?void 0:t.uid)){e.next=15;break}return localStorage.setItem("li","true"),l(!0),e.next=5,b(t);case 5:return n=e.sent,r="Bearer ".concat(n),e.next=9,w()({url:"https://cpsc471-tutor.hasura.app/v1/graphql",method:"post",headers:{"Content-Type":"application/json",Authorization:r},data:{query:"\n              query GetUserType($user_id: String!) {\n                user_by_pk(user_id: $user_id) {\n                  tutor {\n                    tutor_id\n                  }\n                  student {\n                    student_id\n                  }\n                }\n              }\n            ",variables:{user_id:t.uid}}});case 9:(a=e.sent).data.errors?console.log("handle error, ",a.data.errors):((null===(i=a.data.data.user_by_pk)||void 0===i||null===(s=i.tutor)||void 0===s?void 0:s.tutor_id)?j="tutor":(null===(o=a.data.data.user_by_pk)||void 0===o||null===(d=o.student)||void 0===d?void 0:d.student_id)&&(j="student"),u.current=j),l(!1),c(t),e.next=17;break;case 15:c(null),u.current=null;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b]);Object(r.useEffect)((function(){Object(v.c)(k,y)}),[y]);for(var C=Object(p.a)({uri:"https://cpsc471-tutor.hasura.app/v1/graphql"}),S=Object(_.a)(function(){var e=Object(O.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.headers,e.next=3,b(i);case 3:return a=e.sent,e.abrupt("return",{headers:Object(j.a)(Object(j.a)({},r),{},{authorization:a?"Bearer ".concat(a):""})});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),$={},T=0,D=["appointment","course","hours","offering","request","review","student","tutor","university","user"];T<D.length;T++){var F=D[T];$[F]={keyFields:["".concat(F,"_id")]}}var P=new h.a({connectToDevTools:!0,link:S.concat(C),cache:new f.a({typePolicies:$})});return Object(I.jsx)(q.Provider,{value:{currentUser:i,userType:u,pending:d},children:Object(I.jsx)(g.a,{client:P,children:t})})},D=n(437),F=n(440);function P(){return Object(I.jsx)(D.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",children:Object(I.jsx)(F.a,{})})}function R(e){var t,n,a=e.children,i=Object(r.useContext)(q).currentUser,c=Object(u.f)();return localStorage.getItem("li")&&!i?Object(I.jsx)(P,{}):i&&i.uid?Object(I.jsx)(u.a,{to:null!==(t=null===(n=c.state)||void 0===n?void 0:n.from)&&void 0!==t?t:"/"}):a}function U(e){var t=e.children,n=Object(r.useContext)(q),a=n.currentUser,i=n.userType,c=Object(u.f)();return localStorage.getItem("li")&&!a?Object(I.jsx)(P,{}):a?i.current&&"/onboarding"===c.pathname?Object(I.jsx)(u.a,{to:"/"}):t:Object(I.jsx)(u.a,{to:"/signin",state:{from:c}})}function W(e){var t=e.children,n=Object(r.useContext)(q),a=n.userType;return n.pending?Object(I.jsx)(P,{}):a.current?t:Object(I.jsx)(u.a,{to:"/onboarding"})}var N,A,z,E,G,V,Y,L,B,M,H,Q,J,K,X,Z,ee,te,ne,re,ae,ie,ce,se,oe,de,le,ue,je,be,me,Oe=n(117),xe=n(3),pe=n(411),he=n(406),fe=n(404),ge=n(165),_e=n.n(ge),ve=n(125),ye=n.n(ve),we=n(164),Ce=n.n(we),Se=n(448),$e=n(412),ke=n(403),Ie=n(434),qe=n(442),Te=n(444),De=n(429),Fe=n(413),Pe=n(397),Re=n(243),Ue=n(450),We=n(9),Ne=n(41),Ae=n(449),ze=n(143),Ee=n(392),Ge=n(24),Ve=n(431),Ye=n(430),Le=n(445),Be=n(447),Me=n(446),He=n(433),Qe=n(385),Je=n(390),Ke=n(441),Xe=n(443),Ze=n(399),et=n(400),tt=n(401),nt=n(402),rt=n(383),at=n(384),it=n(452),ct=n(391),st=n(428),ot=n(316),dt=n(422),lt=n(396),ut=n(34),jt=n.n(ut),bt=n(25),mt=n(424),Ot=Object(mt.a)(N||(N=Object(bt.a)(["\n  mutation InsertTutor($tutor_id: String!) {\n    insert_tutor_one(object: { tutor_id: $tutor_id }) {\n      tutor_id\n    }\n  }\n"]))),xt=Object(mt.a)(A||(A=Object(bt.a)(["\n  mutation InsertStudent($student_id: String!) {\n    insert_student_one(object: { student_id: $student_id }) {\n      student_id\n    }\n  }\n"]))),pt=Object(mt.a)(z||(z=Object(bt.a)(["\n  mutation UpdateStudent(\n    $id: String!\n    $name: String!\n    $university_id: Int\n    $major: String\n    $year: Int\n  ) {\n    update_student_by_pk(\n      pk_columns: { student_id: $id }\n      _set: { major: $major, year: $year }\n    ) {\n      student_id\n      major\n      year\n    }\n    update_user_by_pk(\n      pk_columns: { user_id: $id }\n      _set: { name: $name, university_id: $university_id }\n    ) {\n      user_id\n      name\n      university_id\n      university {\n        university_id\n        name\n      }\n    }\n  }\n"]))),ht=Object(mt.a)(E||(E=Object(bt.a)(["\n  mutation UpdateTutor(\n    $id: String!\n    $name: String!\n    $university_id: Int!\n    $hourly_rate: numeric\n    $bio: String\n  ) {\n    update_tutor_by_pk(\n      pk_columns: { tutor_id: $id }\n      _set: { hourly_rate: $hourly_rate, bio: $bio }\n    ) {\n      tutor_id\n      hourly_rate\n      bio\n    }\n    update_user_by_pk(\n      pk_columns: { user_id: $id }\n      _set: { name: $name, university_id: $university_id }\n    ) {\n      user_id\n      name\n      university_id\n      university {\n        university_id\n        name\n      }\n    }\n  }\n"]))),ft=Object(mt.a)(G||(G=Object(bt.a)(["\n  mutation CreateOffering(\n    $tutor_id: String!\n    $course_id: String!\n    $grade_received: String\n    $professor_name: String\n    $year_taken: String\n  ) {\n    insert_offering_one(\n      object: {\n        tutor_id: $tutor_id\n        course_id: $course_id\n        grade_received: $grade_received\n        professor_name: $professor_name\n        year_taken: $year_taken\n      }\n    ) {\n      offering_id\n    }\n  }\n"]))),gt=Object(mt.a)(V||(V=Object(bt.a)(["\n  mutation UpdateOffering(\n    $offering_id: Int!\n    $course_id: String!\n    $grade_received: String\n    $professor_name: String\n    $year_taken: String\n  ) {\n    update_offering_by_pk(\n      pk_columns: { offering_id: $offering_id }\n      _set: {\n        course_id: $course_id\n        grade_received: $grade_received\n        professor_name: $professor_name\n        year_taken: $year_taken\n      }\n    ) {\n      offering_id\n      grade_received\n      professor_name\n      year_taken\n    }\n  }\n"]))),_t=Object(mt.a)(Y||(Y=Object(bt.a)(["\n  mutation DeleteOffering($offering_id: Int!) {\n    delete_offering_by_pk(offering_id: $offering_id) {\n      offering_id\n    }\n  }\n"]))),vt=Object(mt.a)(L||(L=Object(bt.a)(["\n  mutation CreateCourse(\n    $course_id: String!\n    $name: String!\n    $department: String!\n    $university_id: Int!\n  ) {\n    insert_course_one(\n      object: {\n        course_id: $course_id\n        name: $name\n        department: $department\n        university_id: $university_id\n      }\n    ) {\n      course_id\n    }\n  }\n"]))),yt=Object(mt.a)(B||(B=Object(bt.a)(["\n  mutation CreateReview(\n    $stars: numeric!\n    $comment: String\n    $student_id: String!\n    $tutor_id: String!\n  ) {\n    insert_review_one(\n      object: {\n        stars: $stars\n        student_id: $student_id\n        tutor_id: $tutor_id\n        comment: $comment\n      }\n      on_conflict: {\n        constraint: review_student_id_tutor_id_key\n        update_columns: [stars, comment, created_at]\n      }\n    ) {\n      stars\n      review_id\n      created_at\n      comment\n      student_id\n      tutor_id\n    }\n  }\n"]))),wt=(Object(mt.a)(M||(M=Object(bt.a)(["\n  mutation UpdateReview($review_id: Int!, $comment: String!, $stars: numeric!) {\n    update_review_by_pk(\n      pk_columns: { review_id: $review_id }\n      _set: { comment: $comment, stars: $stars }\n    ) {\n      review_id\n    }\n  }\n"]))),Object(mt.a)(H||(H=Object(bt.a)(["\n  mutation DeleteReview($review_id: Int!) {\n    delete_review_by_pk(review_id: $review_id) {\n      review_id\n    }\n  }\n"]))),Object(mt.a)(Q||(Q=Object(bt.a)(["\n  mutation GetOfferings(\n    $student_id: String!\n    $course_id: String!\n    $professor_name: String\n    $comment: String\n  ) {\n    insert_request_one(\n      object: {\n        student_id: $student_id\n        course_id: $course_id\n        professor_name: $professor_name\n        comment: $comment\n      }\n    ) {\n      request_id\n      student_id\n      course_id\n      professor_name\n      comment\n      created_at\n    }\n  }\n"])))),Ct=(Object(mt.a)(J||(J=Object(bt.a)(["\n  mutation UpdateRequest(\n    $request_id: Int!\n    $professor_name: String!\n    $comment: String\n  ) {\n    update_request_by_pk(\n      pk_columns: { request_id: $request_id }\n      _set: { professor_name: $professor_name, comment: $comment }\n    ) {\n      request_id\n      professor_name\n      comment\n    }\n  }\n"]))),Object(mt.a)(K||(K=Object(bt.a)(["\n  mutation DeleteRequest($request_id: Int!) {\n    delete_request_by_pk(request_id: $request_id) {\n      request_id\n    }\n  }\n"])))),St=Object(mt.a)(X||(X=Object(bt.a)(["\n  mutation CreateAppointment(\n    $location: String!\n    $offering_id: Int!\n    $student_id: String!\n    $student_comment: String\n  ) {\n    insert_appointment_one(\n      object: {\n        location: $location\n        offering_id: $offering_id\n        student_id: $student_id\n        student_comment: $student_comment\n      }\n    ) {\n      appointment_id\n    }\n  }\n"]))),$t=Object(mt.a)(Z||(Z=Object(bt.a)(["\n  mutation UpdateHours($where: hours_bool_exp!, $appointment_id: Int!) {\n    diassociateHours: update_hours(\n      where: { appointment_id: { _eq: $appointment_id } }\n      _set: { appointment_id: null }\n    ) {\n      affected_rows\n    }\n    associateNewHours: update_hours(\n      where: $where\n      _set: { appointment_id: $appointment_id }\n    ) {\n      returning {\n        hours_id\n      }\n    }\n  }\n"]))),kt=Object(mt.a)(ee||(ee=Object(bt.a)(["\n  mutation UpdateAppointment(\n    $location: String!\n    $student_comment: String\n    $appointment_id: Int!\n  ) {\n    update_appointment_by_pk(\n      pk_columns: { appointment_id: $appointment_id }\n      _set: { location: $location, student_comment: $student_comment }\n    ) {\n      appointment_id\n      student_comment\n      location\n    }\n  }\n"]))),It=Object(mt.a)(te||(te=Object(bt.a)(["\n  mutation DeleteHour($hours_id: Int!) {\n    delete_hours_by_pk(hours_id: $hours_id) {\n      hours_id\n    }\n  }\n"]))),qt=Object(mt.a)(ne||(ne=Object(bt.a)(["\n  mutation CreateHour($tutor_id: String!, $start_time: timestamp!) {\n    insert_hours_one(object: { tutor_id: $tutor_id, start_time: $start_time }) {\n      hours_id\n    }\n  }\n"]))),Tt=(Object(mt.a)(re||(re=Object(bt.a)(["\n  query GetUserType($user_id: String!) {\n    user_by_pk(user_id: $user_id) {\n      tutor {\n        tutor_id\n      }\n      student {\n        student_id\n      }\n    }\n  }\n"]))),Object(mt.a)(ae||(ae=Object(bt.a)(["\n  query GetUniversities {\n    university(order_by: { name: asc }) {\n      university_id\n      name\n    }\n  }\n"])))),Dt=Object(mt.a)(ie||(ie=Object(bt.a)(["\n  query GetOfferings(\n    $course_exp: course_bool_exp!\n    $tutor_exp: tutor_bool_exp!\n  ) {\n    offering(\n      where: { course: $course_exp, tutor: $tutor_exp }\n      order_by: { course_id: asc }\n    ) {\n      offering_id\n      grade_received\n      professor_name\n      year_taken\n      course {\n        course_id\n        name\n        department\n      }\n      tutor {\n        tutor_id\n        hourly_rate\n        bio\n        user {\n          user_id\n          name\n        }\n        reviews_aggregate {\n          aggregate {\n            avg {\n              stars\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),Ft=Object(mt.a)(ce||(ce=Object(bt.a)(["\n  query GetStudentProfile($id: String!) {\n    student_by_pk(student_id: $id) {\n      student_id\n      major\n      year\n      user {\n        user_id\n        name\n        university {\n          university_id\n          name\n        }\n      }\n    }\n    university(order_by: { name: asc }) {\n      university_id\n      name\n    }\n  }\n"]))),Pt=Object(mt.a)(se||(se=Object(bt.a)(["\n  query GetTutorProfile($id: String!) {\n    tutor_by_pk(tutor_id: $id) {\n      tutor_id\n      bio\n      hourly_rate\n      user {\n        user_id\n        name\n        university {\n          university_id\n          name\n        }\n      }\n      reviews_aggregate {\n        aggregate {\n          avg {\n            stars\n          }\n        }\n      }\n      offerings(order_by: {course_id: asc}) {\n        offering_id\n        grade_received\n        professor_name\n        year_taken\n        course {\n          course_id\n          name\n          department\n        }\n        appointments(limit: 1) {\n          appointment_id\n        }\n      }\n    }\n    university(order_by: {name: asc}) {\n      university_id\n      name\n    }\n  }\n"]))),Rt=Object(mt.a)(oe||(oe=Object(bt.a)(["\n  query GetCourses {\n    course(order_by: { course_id: asc }) {\n      course_id\n      name\n      department\n    }\n  }\n"]))),Ut=Object(mt.a)(de||(de=Object(bt.a)(["\n  query ReadReview($id: String!) {\n    tutor_by_pk(tutor_id: $id) {\n      tutor_id\n      reviews(order_by: { created_at: desc }) {\n        review_id\n        created_at\n        stars\n        comment\n        student {\n          user {\n            user_id\n            name\n          }\n          student_id\n        }\n        student_id\n      }\n    }\n  }\n"]))),Wt=Object(mt.a)(le||(le=Object(bt.a)(["\n  query GetReview($student_id: String!, $tutor_id: String!) {\n    review(\n      where: { student_id: { _eq: $student_id }, tutor_id: { _eq: $tutor_id } }\n    ) {\n      review_id\n      comment\n      stars\n    }\n  }\n"]))),Nt=Object(mt.a)(ue||(ue=Object(bt.a)(["\n  query ReadRequest {\n    request(order_by: { created_at: desc }) {\n      request_id\n      course_id\n      comment\n      professor_name\n      created_at\n      student {\n        user {\n          name\n          user_id\n          university_id\n        }\n        student_id\n      }\n      student_id\n      course {\n        name\n        course_id\n        department\n        university {\n          name\n          university_id\n        }\n        university_id\n      }\n    }\n  }\n"]))),At=Object(mt.a)(je||(je=Object(bt.a)(["\n  query GetStudentAppointments($student_id: String!, $order_by: order_by!) {\n    appointment(\n      where: { student_id: { _eq: $student_id } }\n      order_by: { hours_aggregate: { min: { start_time: $order_by } } }\n    ) {\n      appointment_id\n      offering {\n        course_id\n        offering_id\n        tutor {\n          tutor_id\n          user {\n            name\n            user_id\n          }\n        }\n      }\n      location\n      hours_aggregate {\n        aggregate {\n          max {\n            start_time\n          }\n          min {\n            start_time\n          }\n        }\n      }\n      student_comment\n    }\n  }\n"]))),zt=Object(mt.a)(be||(be=Object(bt.a)(["\n  query GetTutorAppointments($tutor_id: String!, $order_by: order_by!) {\n    appointment(\n      where: { offering: { tutor_id: { _eq: $tutor_id } } }\n      order_by: { hours_aggregate: { min: { start_time: $order_by } } }\n    ) {\n      appointment_id\n      student {\n        user {\n          name\n          user_id\n        }\n        student_id\n      }\n      offering {\n        course_id\n        offering_id\n      }\n      location\n      hours_aggregate {\n        aggregate {\n          max {\n            start_time\n          }\n          min {\n            start_time\n          }\n        }\n      }\n      student_comment\n    }\n  }\n"]))),Et=Object(mt.a)(me||(me=Object(bt.a)(["\n  query GetTutorHours($where: hours_bool_exp!) {\n    hours(where: $where, order_by: { start_time: asc }) {\n      hours_id\n      start_time\n      appointment_id\n    }\n  }\n"]))),Gt=n(132);function Vt(e){var t,n,a,i,c,s=e.offering,o=e.appointment,d=e.handleClose,l=e.isEdit,u=void 0!==l&&l,b=Object(r.useContext)(q).currentUser,m=Object(r.useState)(null===o||void 0===o?void 0:o.location),O=Object(x.a)(m,2),p=O[0],h=O[1],f=Object(r.useState)(null===o||void 0===o?void 0:o.student_comment),g=Object(x.a)(f,2),_=g[0],v=g[1],y=Object(r.useState)(new Set),w=Object(x.a)(y,2),C=w[0],S=w[1],$=null===o||void 0===o?void 0:o.hours_aggregate.aggregate.min.start_time,k=Object(r.useState)(null!==(t=jt.a.utc($).local())&&void 0!==t?t:jt()()),T=Object(x.a)(k,2),P=T[0],R=T[1],U=P.startOf("day").utc(),W=[{appointment_id:{_is_null:!0}}];(null===o||void 0===o?void 0:o.appointment_id)&&W.push({appointment_id:{_eq:o.appointment_id}});var N=Object(rt.a)(Et,{fetchPolicy:"network-only",variables:{where:{_or:W,tutor_id:{_eq:s.tutor.tutor_id},start_time:{_gte:U.format(),_lt:U.add(1,"day").format()}}},onCompleted:function(e){if(null===o||void 0===o?void 0:o.appointment_id){var t=new Set;e.hours.forEach((function(e){e.appointment_id===o.appointment_id&&t.add(e.start_time)})),S(t)}}}),A=N.data,z=N.loading,E=Object(at.a)($t,{onCompleted:function(){return ee()},refetchQueries:["GetStudentAppointments"]}),G=Object(x.a)(E,2),V=G[0],Y=G[1],L=function(e){var t=[];C.forEach((function(e){t.push({start_time:{_eq:e}})})),V({variables:{appointment_id:e,where:{_and:[{_or:t},{tutor_id:{_eq:s.tutor.tutor_id}}]}}})},B=Object(at.a)(St,{variables:{location:p,student_id:b.uid,offering_id:s.offering_id,student_comment:_}}),M=Object(x.a)(B,2),H=M[0],Q=M[1],J=Object(at.a)(kt,{variables:{location:p,appointment_id:null===o||void 0===o?void 0:o.appointment_id,student_comment:_}}),K=Object(x.a)(J,2),X=K[0],Z=K[1],ee=function(){d(),S(new Set),u||(R(jt()()),h(""),v(""))};return Object(I.jsxs)(Qe.a,{open:!0,onClose:ee,scroll:"body",children:[Object(I.jsxs)(Je.a,{children:[u?"Edit your ":"Book an "," appointment with"," ",s.tutor.user.name," for"," ",null!==(n=s.course_id)&&void 0!==n?n:s.course.course_id]}),Object(I.jsxs)(Ke.a,{sx:{marginBottom:5},children:[Object(I.jsx)(ze.a,{mb:1,children:"Select a day to view availability"}),Object(I.jsx)(ot.b,{dateAdapter:ct.a,children:Object(I.jsx)(st.a,{clearable:!0,value:P,onChange:function(e){R(e)},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{fullWidth:!0,helperText:null}))}})}),z&&Object(I.jsx)(D.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:2,children:Object(I.jsx)(F.a,{})}),0===(null===A||void 0===A||null===(a=A.hours)||void 0===a?void 0:a.length)&&Object(I.jsxs)(ze.a,{mt:2,mb:u&&2,children:[s.tutor.user.name," has no ",u&&"other"," availability on this day"]}),(null===A||void 0===A||null===(i=A.hours)||void 0===i?void 0:i.length)>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(ze.a,{mt:2,children:"Select one or more adjacent slots"}),Object(I.jsx)(Te.a,{children:A.hours.map((function(e,t){var n=C.has(e.start_time);return Object(I.jsx)(lt.a,{selected:n,onClick:function(){return function(e,t){var n=new Set(C),r=jt.a.utc(e),a=r.subtract(1,"hour").format("YYYY-MM-DDTHH:mm:ss"),i=r.add(1,"hour").format("YYYY-MM-DDTHH:mm:ss");t?C.has(a)&&C.has(i)||n.delete(e):(0===C.size||C.has(a)||C.has(i))&&n.add(e),S(n)}(e.start_time,n)},children:Object(I.jsx)(Pe.a,{primary:jt.a.utc(e.start_time).local().format("h:mma")})},t)}))})]}),((null===A||void 0===A||null===(c=A.hours)||void 0===c?void 0:c.length)>0||u)&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(ze.a,{mb:2,children:"Where would you like to meet?"}),Object(I.jsx)(dt.a,{fullWidth:!0,name:"location",label:"Location",value:p,onChange:function(e){return h(e.target.value)}}),Object(I.jsxs)(ze.a,{mb:2,mt:2,children:["Anything you'd like ",s.tutor.user.name," to know?"]}),Object(I.jsx)(dt.a,{fullWidth:!0,name:"note",label:"Note",value:_,onChange:function(e){return v(e.target.value)}})]})]}),C.size>0&&p&&Object(I.jsx)(Xe.a,{children:Object(I.jsxs)(it.a,{loading:Q.loading||Y.loading||Z.loading,onClick:function(){u?X({onCompleted:function(e){L(e.update_appointment_by_pk.appointment_id)}}):H({onCompleted:function(e){return L(e.insert_appointment_one.appointment_id)}})},children:[" ","Confirm"," "]})})]})}jt.a.extend(Gt);var Yt=n(398),Lt=n(427);function Bt(e){var t,n=e.open,a=e.close,i=e.tutor,c=r.useContext(q).currentUser,s=Object(at.a)(yt,{refetchQueries:[Wt]}),o=Object(x.a)(s,2),d=o[0],l=o[1].loading,u=Object(rt.a)(Wt,{variables:{tutor_id:i.tutor_id,student_id:c.uid},skip:!n}),j=r.useState(""),b=Object(x.a)(j,2),m=b[0],O=b[1],p=r.useState(0),h=Object(x.a)(p,2),f=h[0],g=h[1],_=function(){a(),O(""),g(0)};return r.useEffect((function(){var e;(null===u||void 0===u||null===(e=u.data)||void 0===e?void 0:e.review[0])&&(O(u.data.review[0].comment),g(u.data.review[0].stars))}),[null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.review]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(Qe.a,{open:n,onClose:_,children:[Object(I.jsx)(Je.a,{children:"Review"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"reviewForm",onSubmit:function(e){e.preventDefault(),d({variables:{student_id:c.uid,tutor_id:i.tutor_id,comment:m,stars:f},onCompleted:_})},children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsxs)(ze.a,{children:["How would you rate your experience with ",i.user.name,"?"]}),u.loading?Object(I.jsx)(D.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",mt:2,children:Object(I.jsx)(F.a,{})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Lt.a,{name:"simple-controlled",size:"large",value:f,onChange:function(e,t){g(t||0)}}),Object(I.jsx)(dt.a,{name:"commentName",label:"Comment (optional)",value:m,multiline:!0,rows:5,maxRows:10,onChange:function(e){return O(e.target.value)}})]})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:l,onClick:_,children:"Cancel"}),Object(I.jsx)(it.a,{loading:l,type:"submit",form:"reviewForm",children:"Create"})]})]})})}var Mt=n(132);function Ht(e){var t,n,a=e.appointment,i=e.isStudent,c=Object(r.useState)(!1),s=Object(x.a)(c,2),o=s[0],d=s[1],l=Object(r.useState)(!1),u=Object(x.a)(l,2),j=u[0],b=u[1],m=Object(r.useState)(!1),O=Object(x.a)(m,2),p=O[0],h=O[1],f=a.hours_aggregate.aggregate.min.start_time,g=a.hours_aggregate.aggregate.max.start_time,_="h:mma",v=jt.a.utc(f).local().format(_),y=jt.a.utc(g).add(1,"hour").local().format(_),w=jt()().local()>jt.a.utc(g).local(),C=i?null===(t=a.offering.tutor.user)||void 0===t?void 0:t.name:null===(n=a.student.user)||void 0===n?void 0:n.name;return Object(I.jsxs)("div",{children:[Object(I.jsxs)(Le.a,{sx:{minHeight:200},children:[Object(I.jsxs)(Me.a,{children:[Object(I.jsxs)(Ye.a,{mb:1,container:!0,justifyContent:"space-between",direction:"row",alignItems:"center",children:[Object(I.jsx)(ze.a,{variant:"h6",children:C}),i&&Object(I.jsx)(qe.a,{size:"small",onClick:function(){return w?h(!0):b(!0)},children:w?Object(I.jsx)(He.a,{title:"Write a review",children:Object(I.jsx)(Ze.a,{fontSize:"10"})}):Object(I.jsx)(He.a,{title:"Edit appointment",children:Object(I.jsx)(et.a,{fontSize:"10"})})})]}),Object(I.jsx)(ze.a,{mb:1,variant:"body1",children:a.offering.course_id}),Object(I.jsxs)(Ye.a,{container:!0,children:[Object(I.jsx)(Ye.a,{item:!0,mr:1,children:Object(I.jsx)(tt.a,{fontSize:"10"})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsxs)(ze.a,{color:"textSecondary",variant:"body1",children:[v," to ",y]})})]}),Object(I.jsxs)(Ye.a,{container:!0,children:[Object(I.jsx)(Ye.a,{item:!0,mr:1,children:Object(I.jsx)(nt.a,{fontSize:"10",color:"textSecondary"})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(ze.a,{color:"textSecondary",variant:"body1",children:a.location})})]})]}),Object(I.jsx)(Be.a,{disableSpacing:!0,children:a.student_comment&&Object(I.jsx)(Ve.a,{size:"small",onClick:function(){return d(!0)},children:"See Notes"})})]}),Object(I.jsxs)(Qe.a,{open:o,onClose:function(){return d(!1)},children:[Object(I.jsx)(Je.a,{children:"Appointment Notes"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)(ze.a,{children:a.student_comment})}),Object(I.jsx)(Xe.a,{children:Object(I.jsx)(Ve.a,{onClick:function(){return d(!1)},children:" Done "})})]}),j&&Object(I.jsx)(Vt,{offering:a.offering,appointment:a,handleClose:function(){return b(!1)},isEdit:!0}),i&&Object(I.jsx)(Bt,{open:p,close:function(){return h(!1)},tutor:a.offering.tutor})]})}jt.a.extend(Mt);var Qt=n(132);function Jt(){var e,t,n=Object(r.useState)(!0),a=Object(x.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(new Map),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(r.useContext)(q),j=u.userType,b=u.currentUser,m="student"===j.current,O=Object(rt.a)(At,{fetchPolicy:"network-only",variables:{student_id:b.uid,order_by:i?"asc":"desc"},skip:!m}),p=Object(rt.a)(zt,{fetchPolicy:"network-only",variables:{tutor_id:b.uid,order_by:i?"asc":"desc"},skip:m}),h=m?O.data:p.data;return Object(r.useEffect)((function(){if(null===h||void 0===h?void 0:h.appointment){var e=new Map,t=jt()();h.appointment.forEach((function(n){var r,a,i=jt.a.utc(n.hours_aggregate.aggregate.min.start_time).local(),c=i.month()===t.month(),s=i.year()===t.year();a=c&&s&&i.date()===t.date()?"Today":c&&s&&i.date()===t.add(1,"day").date()?"Tomorrow":c&&s&&i.date()===t.subtract(1,"day").date()?"Yesterday":i.format("MMMM D, YYYY");var o=null!==(r=e.get(a))&&void 0!==r?r:[];o.push(n),e.set(a,o)})),l(e)}}),[null===h||void 0===h?void 0:h.appointment]),O.loading||p.loading?Object(I.jsx)(P,{}):O.error||p.error?"".concat(null!==(e=O.error)&&void 0!==e?e:p.error):Object(I.jsx)(Ye.a,{container:!0,mt:6,px:6,pb:6,children:Object(I.jsxs)(Ye.a,{container:!0,item:!0,xs:12,justifyContent:"center",alignItems:"center",rowSpacing:5,children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,children:0===(null===h||void 0===h||null===(t=h.appointment)||void 0===t?void 0:t.length)?Object(I.jsx)(ze.a,{children:"You have no appointments yet"}):Object(I.jsx)(Ve.a,{onClick:function(){c(!i)},children:i?"View Latest":"View Earliest"})}),Object(Ge.a)(d).map((function(e,t){var n=Object(x.a)(e,2),a=n[0],i=n[1];return Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsx)(ze.a,{variant:"h5",children:a})}),Object(I.jsx)(Ye.a,{item:!0,container:!0,columnSpacing:2,rowSpacing:2,children:i.map((function(e,t){return Object(I.jsx)(Ye.a,{item:!0,md:4,sm:6,xs:12,children:Object(I.jsx)(Ht,{appointment:e,isStudent:m})},t)}))})]},t)}))]})})}jt.a.extend(Qt);var Kt=n(408),Xt=n(409),Zt=n(410),en=n(419),tn=n(423),nn=n(438),rn=n(247),an=n(425),cn=n(405);var sn=function(e){return Object(I.jsx)(ze.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})},on=n(132);function dn(e){var t=e.offering,n=e.children,r=t.tutor.reviews_aggregate.aggregate.avg.stars;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(rn.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:[Object(I.jsx)(sn,{children:"".concat(t.course.course_id," ").concat(t.course.name)}),Object(I.jsxs)(Yt.a,{direction:"row",spacing:2,divider:Object(I.jsx)(ke.a,{orientation:"vertical",flexItem:!0}),children:[Object(I.jsxs)(Ye.a,{container:!0,spacing:2,children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,md:6,children:Object(I.jsxs)(Yt.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(I.jsx)(fe.a,{fontSize:"small"}),Object(I.jsx)(ze.a,{variant:"h6",children:t.tutor.user.name})]})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:6,children:Object(I.jsxs)(Yt.a,{direction:"row",alignItems:"center",spacing:1,children:[Object(I.jsx)(cn.a,{fontSize:"small"}),Object(I.jsx)(ze.a,{variant:"h6",children:"$".concat(t.tutor.hourly_rate,"/hr")})]})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,alignItems:"center",children:Object(I.jsx)(He.a,{title:"Rating: ".concat(null!==r&&void 0!==r?r:"None"),placement:"right",children:Object(I.jsx)("span",{children:Object(I.jsx)(Lt.a,{value:null!==r&&void 0!==r?r:0,readOnly:!0})})})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsx)(Yt.a,{direction:"row",alignItems:"center",spacing:1,children:Object(I.jsx)(ze.a,{variant:"body1",children:t.tutor.bio})})})]}),t.grade_received?Object(I.jsxs)(Yt.a,{alignItems:"center",justifyContent:"center",minWidth:60,children:[Object(I.jsx)(he.a,{}),Object(I.jsx)(ze.a,{variant:"h5",children:t.grade_received}),Object(I.jsx)(ze.a,{variant:"caption",noWrap:!0,children:t.year_taken}),Object(I.jsx)(ze.a,{variant:"caption",noWrap:!0,children:t.professor_name})]}):null]}),n]})})}jt.a.extend(on);var ln=n(407);function un(e){var t=e.open,n=e.handleClose,r=e.onCompleted,a=Object(rt.a)(Tt),i=a.loading,c=a.error,s=a.data,o=Object(at.a)(vt),d=Object(x.a)(o,2),l=d[0],u=d[1];if(i)return null;if(c)return"".concat(c);var b=s.university,m=b.map((function(e){return e.name}));return Object(I.jsxs)(Qe.a,{open:t,onClose:n,children:[Object(I.jsx)(Je.a,{children:"Add Course"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"newCourseForm",onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget),n=t.get("university"),a=b.find((function(e){return e.name===n}));a&&l({variables:{course_id:t.get("course")||null,name:t.get("name")||null,department:t.get("department")||null,university_id:a.university_id},onCompleted:r})},children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsx)(dt.a,{required:!0,name:"course",label:"Course ID"}),Object(I.jsx)(dt.a,{required:!0,name:"name",label:"Course Name"}),Object(I.jsx)(dt.a,{required:!0,name:"department",label:"Department"}),Object(I.jsx)(an.a,{disablePortal:!0,options:m,renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)({required:!0,name:"university",label:"University"},e))}})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:u.loading,onClick:n,children:"Cancel"}),Object(I.jsx)(it.a,{loading:u.loading,type:"submit",form:"newCourseForm",children:"Create"})]})]})}function jn(e){var t=e.open,n=e.handleClose,a=r.useContext(q).currentUser,i=r.useState(!1),c=Object(x.a)(i,2),s=c[0],o=c[1],d=r.useState(null),l=Object(x.a)(d,2),u=l[0],b=l[1],m=r.useState(null),O=Object(x.a)(m,2),p=O[0],h=O[1],f=r.useState(null),g=Object(x.a)(f,2),_=g[0],v=g[1],y=Object(at.a)(wt),w=Object(x.a)(y,2),C=w[0],S=w[1].loading,$=Object(rt.a)(Rt);if($.loading)return null;if($.error)return"".concat($.error);var k=$.data.course.map((function(e){return e.course_id})),T=function(){n(),b(null),h(null),v(null)};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Qe.a,{open:t,onClose:T,children:[Object(I.jsx)(Je.a,{children:"Request a Course"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"requestCourseForm",onSubmit:function(e){e.preventDefault(),u&&C({variables:{student_id:a.uid,course_id:u,professor_name:p,comment:_},onCompleted:T})},children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsxs)(Yt.a,{direction:"row",spacing:3,alignItems:"center",children:[Object(I.jsx)(an.a,{disablePortal:!0,fullWidth:!0,options:k,value:u,onChange:function(e,t){return b(t)},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{name:"course",label:"Course"}))}}),Object(I.jsx)(qe.a,{onClick:function(){return o(!0)},children:Object(I.jsx)(ln.a,{})})]}),Object(I.jsx)(dt.a,{name:"professorName",label:"Professor Name (optional)",value:p,onChange:function(e){return h(e.target.value)}}),Object(I.jsx)(dt.a,{name:"comment",label:"Comment (optional)",value:_,onChange:function(e){return v(e.target.value)}})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:S,onClick:T,children:"Cancel"}),Object(I.jsx)(it.a,{disabled:!u,loading:S,type:"submit",form:"requestCourseForm",children:"Create"})]})]}),Object(I.jsx)(un,{open:s,handleClose:function(){return o(!1)},onCompleted:function(){o(!1),$.refetch()}})]})}function bn(){var e=r.useState(null),t=Object(x.a)(e,2),n=t[0],a=t[1],i=r.useState(null),c=Object(x.a)(i,2),s=c[0],o=c[1],d=r.useState(null),l=Object(x.a)(d,2),u=l[0],b=l[1],m=r.useState(!1),O=Object(x.a)(m,2),p=O[0],h=O[1],f=Object(rt.a)(Rt),g=f.loading,_=f.error,v=f.data;if(g)return Object(I.jsx)(P,{});if(_)return"".concat(_);var y=v.course.map((function(e){return e.course_id}));return Object(I.jsxs)(nn.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:[Object(I.jsxs)(Ye.a,{container:!0,spacing:3,children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsx)(rn.a,{sx:{p:2},display:"flex",justifyContent:"center",children:Object(I.jsxs)(Ye.a,{container:!0,spacing:3,children:[Object(I.jsxs)(Ye.a,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:[Object(I.jsx)(Kt.a,{sx:{mr:1}}),Object(I.jsx)(ze.a,{variant:"h6",children:"Filter results"})]}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:6,display:"flex",sx:{justifyContent:{xs:"flex-start",md:"flex-end"}},children:Object(I.jsx)(Ve.a,{onClick:function(){return h(!0)},startIcon:Object(I.jsx)(Xt.a,{}),variant:"outlined",children:"Request a course"})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"flex-end",children:Object(I.jsx)(ot.b,{dateAdapter:en.a,children:Object(I.jsx)(tn.a,{clearable:!0,label:"After Time",value:s,onChange:o,renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{fullWidth:!0,helperText:null}))}})})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"flex-end",children:Object(I.jsx)(ot.b,{dateAdapter:en.a,children:Object(I.jsx)(tn.a,{clearable:!0,label:"Before Time",value:u,onChange:b,renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{fullWidth:!0,helperText:null}))}})})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"flex-end",children:Object(I.jsx)(an.a,{disablePortal:!0,options:y,value:n,onChange:function(e,t){return a(t)},sx:{width:"100%"},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{fullWidth:!0,label:"Course"}))}})})]})})}),Object(I.jsx)(mn,{course:n,startTime:s,endTime:u})]}),Object(I.jsx)(jn,{open:p,handleClose:function(){return h(!1)}})]})}var mn=function(e){var t,n=e.course,a=e.startTime,i=e.endTime,c=r.useContext(q).currentUser,s=r.useState(),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(rt.a)(Ft,{variables:{id:c.uid}}),b=null===(t=u.data)||void 0===t?void 0:t.student_by_pk.user.university.university_id,m=Object(rt.a)(Dt,{skip:!b,variables:{course_exp:Object(j.a)({},n&&{course_id:{_eq:n}}),tutor_exp:Object(j.a)({user:{university_id:{_eq:b}}},(a||i)&&{hours:{start_time:Object(j.a)(Object(j.a)({},a&&{_gte:a.toISOString()}),i&&{_lte:i.toISOString()})}})}});if(u.error||m.error)return"".concat(u.error).concat(m.error);if(void 0===m.data)return Object(I.jsx)(P,{});var O=m.data.offering;return 0===O.length?Object(I.jsx)(D.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh",children:"No results."}):Object(I.jsxs)(I.Fragment,{children:[O.map((function(e,t){return Object(I.jsx)(Ye.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(dn,{offering:e,children:Object(I.jsx)(Yt.a,{mt:2,direction:"row",children:Object(I.jsx)(Ve.a,{variant:"contained",startIcon:Object(I.jsx)(Zt.a,{}),onClick:function(){return l(e)},children:"Book This Tutor"})})})},t)})),d&&Object(I.jsx)(Vt,{offering:d,handleClose:function(){return l(null)}})]})};function On(){var e=r.useContext(q).currentUser,t=Object(at.a)(pt,{variables:{id:e.uid}}),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Object(rt.a)(Ft,{variables:{id:e.uid}}),s=c.loading,o=c.error,d=c.data;if(s)return Object(I.jsx)(P,{});if(o)return"".concat(o);var l=d.student_by_pk,u=d.university.map((function(e){return{label:e.name,id:e.university_id}}));return Object(I.jsx)(xn,{student:l,universities:u,onSave:function(e,t){var n;e.preventDefault();var r=new FormData(e.currentTarget);a({variables:{name:r.get("name")||null,university_id:null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:null,major:r.get("major")||null,year:r.get("year")||null}})},loading:i.loading})}var xn=function(e){var t=e.student,n=e.universities,a=e.onSave,i=e.loading,c=r.useState(t.user.university?{label:t.user.university.name,id:t.user.university.university_id}:null),s=Object(x.a)(c,2),o=s[0],d=s[1];return Object(I.jsx)(nn.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:Object(I.jsx)(Ye.a,{container:!0,spacing:3,justifyContent:"center",children:Object(I.jsx)(Ye.a,{item:!0,xs:12,md:10,children:Object(I.jsxs)(rn.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:[Object(I.jsx)(sn,{children:"Your Profile"}),Object(I.jsxs)(Ye.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",component:"form",onSubmit:function(e){return a(e,o)},noValidate:!0,sx:{mt:2},children:[Object(I.jsx)(Ye.a,{item:!0,xs:10,md:10,children:Object(I.jsx)(dt.a,{required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",defaultValue:t.user.name})}),Object(I.jsx)(Ye.a,{item:!0,xs:10,md:10,children:Object(I.jsx)(an.a,{disablePortal:!0,id:"university",options:n,value:o,isOptionEqualToValue:function(e,t){return e.id===t.id},onChange:function(e,t){return d(t)},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)({id:"university",label:"University"},e))}})}),Object(I.jsx)(Ye.a,{item:!0,xs:10,md:5,children:Object(I.jsx)(dt.a,{fullWidth:!0,id:"major",label:"Major",name:"major",defaultValue:t.major})}),Object(I.jsx)(Ye.a,{item:!0,xs:10,md:5,children:Object(I.jsx)(dt.a,{fullWidth:!0,id:"year",label:"Year",name:"year",type:"number",defaultValue:t.year})}),Object(I.jsx)(Ye.a,{item:!0,xs:10,sx:{mt:2,mb:2},children:Object(I.jsx)(it.a,{loading:i,type:"submit",variant:"contained",children:"Save"})})]})]})})})})};function pn(e){var t=e.page,n=Object(u.g)(),a=Object(We.a)(Se.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(j.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),i=Object(We.a)(Ie.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return{"& .MuiDrawer-paper":Object(j.a)({position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!n&&Object(xe.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),c=Object(Ne.a)(),s=Object(Ee.a)(c.breakpoints.up("sm")),o=r.useState(!0),d=Object(x.a)(o,2),l=d[0],b=d[1],m=r.useState(null),O=Object(x.a)(m,2),p=O[0],h=O[1],f=function(e){s?b(!l):h(null===p?e.currentTarget:null)},g=[["Appointments",Object(I.jsx)(pe.a,{})],["Offerings",Object(I.jsx)(he.a,{})],["Profile",Object(I.jsx)(fe.a,{})]];return Object(I.jsxs)(D.a,{sx:{display:"flex"},children:[Object(I.jsx)($e.a,{}),Object(I.jsx)(a,{position:"absolute",open:s&&l,children:Object(I.jsxs)(Ae.a,{sx:{pr:"24px"},children:[Object(I.jsx)(qe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:f,sx:Object(j.a)({marginRight:"36px"},s&&l&&{display:"none"}),children:Object(I.jsx)(Ce.a,{})}),Object(I.jsx)(ze.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:t})]})}),Object(I.jsxs)(i,{variant:"permanent",open:l,sx:Object(j.a)({},!s&&{display:"none"}),children:[Object(I.jsx)(Ae.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:Object(I.jsx)(qe.a,{onClick:f,children:Object(I.jsx)(_e.a,{})})}),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(Te.a,{children:[g.map((function(e,r){var a=Object(x.a)(e,2),i=a[0],c=a[1];return Object(I.jsxs)(De.a,{selected:t===i,button:!0,onClick:function(){n("/".concat(i.toLowerCase()),{replace:!0})},children:[Object(I.jsx)(Fe.a,{children:c}),Object(I.jsx)(Pe.a,{primary:i})]},r)})),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(De.a,{button:!0,onClick:function(){k.signOut(),localStorage.removeItem("li")},children:[Object(I.jsx)(Fe.a,{children:Object(I.jsx)(ye.a,{})}),Object(I.jsx)(Pe.a,{primary:"Log Out"})]})]})]}),Object(I.jsxs)(Re.a,{anchorEl:p,open:!s&&null!==p,onClose:function(){return h(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[g.map((function(e,r){var a=Object(x.a)(e,2),i=a[0],c=a[1];return Object(I.jsxs)(Ue.a,{selected:t===i,onClick:function(){n("/".concat(i.toLowerCase()),{replace:!0}),h(null)},children:[Object(I.jsx)(Fe.a,{children:c}),i]},r)})),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(Ue.a,{onClick:function(){k.signOut(),localStorage.removeItem("li")},children:[Object(I.jsx)(Fe.a,{children:Object(I.jsx)(ye.a,{})}),"Log Out"]})]}),Object(I.jsxs)(D.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[Object(I.jsx)(Ae.a,{}),"Appointments"===t?Object(I.jsx)(Jt,{}):"Offerings"===t?Object(I.jsx)(bn,{}):Object(I.jsx)(On,{})]})]})}var hn=n(416),fn=n(417),gn=n(239),_n=n.n(gn),vn=n(240),yn=n.n(vn),wn=n(132),Cn=n(308);function Sn(){for(var e=Object(r.useContext)(q).currentUser,t=Object(r.useState)(jt()()),n=Object(x.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)({}),s=Object(x.a)(c,2),o=s[0],d=s[1],l=a.startOf("week"),u=a.endOf("week"),b=[l],m=1;m<7;m++){var O=b[m-1];b.push(O.add(1,"day"))}var p=["SUN","MON","TUES","WED","THU","FRI","SAT"],h=[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],f=Object(rt.a)(Et,{variables:{where:{tutor_id:{_eq:e.uid},start_time:{_gte:l,_lte:u}}}}),g=f.loading,_=f.data,v=Object(at.a)(It,{refetchQueries:[Et]}),y=Object(x.a)(v,1)[0],w=Object(at.a)(qt,{refetchQueries:[Et]}),C=Object(x.a)(w,1)[0];Object(r.useEffect)((function(){if(null===_||void 0===_?void 0:_.hours){var e={};_.hours.forEach((function(t){var n=jt.a.utc(t.start_time).local().format();e[n]={id:t.hours_id,appointmentId:t.appointment_id}})),d(e)}}),[null===_||void 0===_?void 0:_.hours]);return Object(I.jsxs)(Ye.a,{container:!0,mt:3,spacing:3,justifyContent:"center",children:[Object(I.jsxs)(Ye.a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[Object(I.jsx)(D.a,{mr:2,display:"flex",alignItems:"center",children:Object(I.jsx)(He.a,{title:"Previous week",children:Object(I.jsx)(qe.a,{onClick:function(){i(a.subtract(7,"day"))},children:Object(I.jsx)(_n.a,{size:"small"})})})}),Object(I.jsx)(ot.b,{dateAdapter:ct.a,children:Object(I.jsx)(st.a,{clearable:!0,value:a,onChange:function(e){i(e)},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{helperText:null}))}})}),Object(I.jsx)(D.a,{ml:2,display:"flex",alignItems:"center",children:Object(I.jsx)(He.a,{title:"Next week",children:Object(I.jsx)(qe.a,{onClick:function(){i(a.add(7,"day"))},children:Object(I.jsx)(yn.a,{size:"small"})})})})]}),Object(I.jsx)(Ye.a,{item:!0,xs:12,md:8,children:g?Object(I.jsx)(P,{}):Object(I.jsx)(Ye.a,{container:!0,justifyContent:"center",columns:7,children:b.map((function(t,n){var r=t.dayOfYear()===jt()().dayOfYear();return Object(I.jsxs)(Ye.a,{container:!0,item:!0,xs:1,direction:"column",justifyContent:"center",alignItems:"center",rowSpacing:1,children:[Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(ze.a,{color:r&&"primary",variant:"h6",children:p[t.day()]})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(ze.a,{color:r&&"primary",variant:"h6",children:t.date()})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(Te.a,{children:h.map((function(n,r){var a=t.add(n,"hour"),i=o[a.format()];return Object(I.jsx)($n,{condition:null===i||void 0===i?void 0:i.appointmentId,wrapper:function(e){return Object(I.jsx)(He.a,{placement:"right",title:"Booked for appointment",children:Object(I.jsx)("span",{children:e})})},children:Object(I.jsx)(De.a,{sx:{marginBottom:"10px",pl:{xs:.2,md:2},pr:{xs:.2,md:2}},disableGutters:!0,disabled:(null===i||void 0===i?void 0:i.appointmentId)&&!0,selected:i&&!0,button:!0,onClick:function(){return function(t,n){var r=t&&!0,a=null===t||void 0===t?void 0:t.appointmentId;r&&!a?y({variables:{hours_id:t.id}}):r||C({variables:{tutor_id:e.uid,start_time:n}})}(i,a)},children:Object(I.jsx)(Pe.a,{primary:a.format("ha")})},r)},r)}))})})]},n)}))})})]})}jt.a.extend(wn),jt.a.extend(Cn);var $n=function(e){var t=e.children,n=e.condition,r=e.wrapper;return n?r(t):t},kn=n(414),In=n(415);function qn(e){var t,n=e.offering,a=e.handleClose,i=e.onSave,c=e.loading,s=r.useState(!1),o=Object(x.a)(s,2),d=o[0],l=o[1],u=Object(rt.a)(Rt);if(u.loading)return null;if(u.error)return"".concat(u.error);var b=u.data.course.map((function(e){return e.course_id}));if(null===n)return null;var m=Boolean(n.offering_id);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(Qe.a,{open:!0,onClose:a,children:[Object(I.jsx)(Je.a,{children:m?"Edit Offering":"New Offering"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"editOfferingForm",onSubmit:i,children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsxs)(Yt.a,{direction:"row",spacing:3,alignItems:"center",children:[Object(I.jsx)(an.a,{disablePortal:!0,fullWidth:!0,disabled:m,options:b,defaultValue:null===(t=n.course)||void 0===t?void 0:t.course_id,renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)({required:!0,name:"course",label:"Course"},e))}}),m?null:Object(I.jsx)(qe.a,{onClick:function(){return l(!0)},children:Object(I.jsx)(ln.a,{})})]}),Object(I.jsx)(dt.a,{name:"gradeReceived",label:"Grade Received (optional)",defaultValue:n.grade_received||""}),Object(I.jsx)(dt.a,{name:"professorName",label:"Professor Name (optional)",defaultValue:n.professor_name||""}),Object(I.jsx)(dt.a,{name:"yearTaken",label:"Year Taken (optional)",defaultValue:n.year_taken||""})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:c,onClick:a,children:"Cancel"}),Object(I.jsx)(it.a,{loading:c,type:"submit",form:"editOfferingForm",children:m?"Save":"Create"})]})]}),Object(I.jsx)(un,{open:d,handleClose:function(){return l(!1)},onCompleted:function(){l(!1),u.refetch()}})]})}function Tn(e){var t,n,a=e.tutor,i=e.open,c=e.handleClose,s=e.onSave,o=e.universities,d=e.loading,l=r.useState(a.user.university?{label:a.user.university.name,id:a.user.university.university_id}:null),u=Object(x.a)(l,2),b=u[0],m=u[1];return Object(I.jsxs)(Qe.a,{open:i,onClose:c,children:[Object(I.jsx)(Je.a,{children:"Edit Profile"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"editProfileForm",onSubmit:function(e){return s(e,b)},children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsx)(dt.a,{required:!0,name:"name",label:"Name",type:"name",defaultValue:a.user.name}),Object(I.jsx)(dt.a,{name:"hourlyRate",label:"Hourly Rate",defaultValue:null!==(t=a.hourly_rate)&&void 0!==t?t:""}),Object(I.jsx)(dt.a,{name:"bio",label:"Bio",defaultValue:null!==(n=a.bio)&&void 0!==n?n:""}),Object(I.jsx)(an.a,{disablePortal:!0,options:o,value:b,isOptionEqualToValue:function(e,t){return e.id===t.id},onChange:function(e,t){return m(t)},renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)(Object(j.a)({},e),{},{label:"University"}))}})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:d,onClick:c,children:"Cancel"}),Object(I.jsx)(it.a,{loading:d,type:"submit",form:"editProfileForm",children:"Save"})]})]})}function Dn(){var e,t,n=r.useContext(q).currentUser,a=Object(at.a)(ht,{variables:{id:n.uid}}),i=Object(x.a)(a,2),c=i[0],s=i[1],o=Object(at.a)(ft),d=Object(x.a)(o,2),l=d[0],u=d[1],b=Object(at.a)(gt),m=Object(x.a)(b,2),O=m[0],p=m[1],h=Object(at.a)(_t),f=Object(x.a)(h,1)[0],g=r.useState(!1),_=Object(x.a)(g,2),v=_[0],y=_[1],w=r.useState(null),C=Object(x.a)(w,2),S=C[0],$=C[1],k=r.useState(null),T=Object(x.a)(k,2),F=T[0],R=T[1],U=Object(rt.a)(Pt,{variables:{id:n.uid}}),W=U.loading,N=U.error,A=U.data,z=U.refetch;if(W)return Object(I.jsx)(P,{});if(N)return"".concat(N);var E=Object(j.a)({},A.tutor_by_pk),G=E.offerings;delete E.offerings;var V=G.map((function(e){return Object(j.a)({tutor:E},e)})),Y=A.university.map((function(e){return{label:e.name,id:e.university_id}}));return Object(I.jsxs)(nn.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:[Object(I.jsxs)(Ye.a,{container:!0,spacing:3,children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsxs)(rn.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:[Object(I.jsx)(sn,{children:"Your Profile"}),Object(I.jsxs)(Ye.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(I.jsxs)(Ye.a,{item:!0,xs:12,md:6,justifyContent:"center",children:[Object(I.jsx)(ze.a,{variant:"h6",children:"Name"}),Object(I.jsx)(ze.a,{variant:"body1",children:E.user.name})]}),Object(I.jsxs)(Ye.a,{item:!0,xs:12,md:6,children:[Object(I.jsx)(ze.a,{variant:"h6",children:"Hourly Rate"}),Object(I.jsx)(ze.a,{variant:"body1",children:"$".concat(E.hourly_rate,"/hr")})]}),Object(I.jsxs)(Ye.a,{item:!0,xs:12,md:6,children:[Object(I.jsx)(ze.a,{variant:"h6",children:"Bio"}),Object(I.jsx)(ze.a,{variant:"body1",children:E.bio})]}),Object(I.jsxs)(Ye.a,{item:!0,xs:12,md:6,children:[Object(I.jsx)(ze.a,{variant:"h6",children:"University"}),Object(I.jsx)(ze.a,{variant:"body1",children:null!==(e=null===(t=E.user.university)||void 0===t?void 0:t.name)&&void 0!==e?e:"None"})]}),Object(I.jsx)(Ye.a,{item:!0,mt:1,xs:12,children:Object(I.jsxs)(D.a,{display:"flex",gap:2,sx:{flexDirection:{xs:"column",md:"row"}},children:[Object(I.jsx)(Ve.a,{variant:"outlined",startIcon:Object(I.jsx)(kn.a,{}),onClick:function(){return y(!0)},children:"Edit Profile"}),Object(I.jsx)(Ve.a,{variant:"outlined",startIcon:Object(I.jsx)(ln.a,{}),onClick:function(){return $({})},children:"Create New Offering"})]})})]})]})}),V.map((function(e,t){return Object(I.jsx)(Ye.a,{item:!0,xs:12,md:6,children:Object(I.jsx)(dn,{offering:e,children:Object(I.jsxs)(D.a,{mt:2,display:"flex",gap:2,sx:{flexDirection:{xs:"column",md:"row"}},children:[Object(I.jsx)(Ve.a,{variant:"outlined",startIcon:Object(I.jsx)(kn.a,{}),disabled:e.offering_id===F,onClick:function(){return $(e)},children:"Edit Offering"}),Object(I.jsx)(Fn,{condition:0!==e.appointments.length,wrapper:function(e){return Object(I.jsx)(He.a,{title:"Offerings with appointments cannot be deleted.",children:Object(I.jsx)("span",{children:e})})},children:Object(I.jsx)(it.a,{variant:"outlined",startIcon:Object(I.jsx)(In.a,{}),loading:e.offering_id===F,color:"error",onClick:function(){return function(e){0===e.appointments.length&&(R(e.offering_id),f({variables:{offering_id:e.offering_id},onCompleted:function(){z(),R(null)}}))}(e)},disabled:0!==e.appointments.length,children:"Delete Offering"})})]})})},t)}))]}),Object(I.jsx)(Tn,{tutor:E,open:v,handleClose:function(){return y(!1)},onSave:function(e,t){var n;e.preventDefault();var r=new FormData(e.currentTarget);c({variables:{name:r.get("name")||null,university_id:null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:null,hourly_rate:r.get("hourlyRate")||null,bio:r.get("bio")||null},onCompleted:function(){y(!1)}})},universities:Y,loading:s.loading}),Object(I.jsx)(qn,{offering:S,handleClose:function(){return $(null)},onSave:function(e){var t;e.preventDefault();var r=new FormData(e.currentTarget);if(r.get("course")||S){var a={course_id:r.get("course")||(null===(t=S.course)||void 0===t?void 0:t.course_id)||null,grade_received:r.get("gradeReceived")||null,professor_name:r.get("professorName")||null,year_taken:r.get("yearTaken")||null},i=function(){$(null),z()};S.offering_id?O({variables:Object(j.a)({offering_id:S.offering_id},a),onCompleted:i}):l({variables:Object(j.a)({tutor_id:n.uid},a),onCompleted:i})}},loading:u.loading||p.loading})]})}var Fn=function(e){var t=e.children,n=e.condition,r=e.wrapper;return n?r(t):t},Pn=n(421),Rn=n(166),Un=n.n(Rn),Wn=Object(Pn.a)({root:{minWidth:100},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function Nn(e){var t=e.requests,n=e.children,r=Wn(),a=t.created_at;return Object(I.jsxs)(Le.a,{className:r.root,children:[Object(I.jsxs)(Me.a,{children:[Object(I.jsx)(Ye.a,{mb:1,container:!0,justifyContent:"space-between",alignItems:"center",direction:"row",children:Object(I.jsx)(ze.a,{variant:"h6",children:t.student.user.name})}),Object(I.jsxs)(Yt.a,{justifyContent:"space-between",direction:"row",children:[Object(I.jsx)(ze.a,{variant:"body1",align:"left",children:t.course_id}),Object(I.jsx)(ze.a,{variant:"body1",align:"right",children:t.professor_name})]}),Object(I.jsxs)(Ye.a,{container:!0,children:[Object(I.jsx)(Ye.a,{item:!0,mr:1,children:Object(I.jsx)(Un.a,{fontSize:"1",color:"primary"})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(ze.a,{color:"textSecondary",variant:"body2",children:new Date(a).toLocaleDateString()})})]}),Object(I.jsx)(ze.a,{mt:1,children:"Comments:"}),Object(I.jsx)(ze.a,{variant:"body1",color:"textSecondary",children:t.comment})]}),Object(I.jsxs)(Be.a,{children:[Object(I.jsx)(Ye.a,{container:!0,justify:"space-between",children:Object(I.jsx)(ze.a,{align:"left"})}),n]})]})}function An(e){var t,n=e.offering,r=e.handleClose,a=e.onSave,i=e.loading;return null===n?null:Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(Qe.a,{open:!0,onClose:r,children:[Object(I.jsx)(Je.a,{children:"New Offering"}),Object(I.jsx)(Ke.a,{children:Object(I.jsx)("form",{id:"editOfferingForm",onSubmit:a,children:Object(I.jsxs)(Yt.a,{spacing:3,mt:1,children:[Object(I.jsx)(Yt.a,{direction:"row",spacing:3,alignItems:"center",children:Object(I.jsx)(an.a,{disablePortal:!0,fullWidth:!0,disabled:!0,options:"",defaultValue:null===(t=n.request)||void 0===t?void 0:t.course_id,renderInput:function(e){return Object(I.jsx)(dt.a,Object(j.a)({name:"course",label:"Course"},e))}})}),Object(I.jsx)(dt.a,{name:"gradeReceived",label:"Grade Received (optional)",defaultValue:n.grade_received||""}),Object(I.jsx)(dt.a,{name:"professorName",label:"Professor Name (optional)",defaultValue:n.professor_name||""}),Object(I.jsx)(dt.a,{name:"yearTaken",label:"Year Taken (optional)",defaultValue:n.year_taken||""})]})})}),Object(I.jsxs)(Xe.a,{children:[Object(I.jsx)(Ve.a,{disabled:i,onClick:r,children:"Cancel"}),Object(I.jsx)(it.a,{loading:i,type:"submit",form:"editOfferingForm",children:"Save"})]})]})})}var zn=Object(Pn.a)({gridContainer:{paddingLeft:"40px",paddingRight:"40px",paddingTop:"35px",paddingBottom:"35px"}});function En(){var e=zn(),t=r.useContext(q).currentUser,n=Object(rt.a)(Nt,{}),a=n.loading,i=n.error,c=n.data,s=n.refetch,o=Object(at.a)(Ct),d=Object(x.a)(o,1)[0],l=Object(at.a)(ft,{onCompleted:function(){f(null)},refetchQueries:["GetOfferings"]}),u=Object(x.a)(l,2),b=u[0],m=u[1],O=r.useState(null),p=Object(x.a)(O,2),h=p[0],f=p[1];if(a)return Object(I.jsx)(P,{});if(i)return"".concat(i);var g=c.request.map((function(e){return Object(j.a)({},e)}));return Object(I.jsxs)("div",{children:[Object(I.jsx)(Ye.a,{container:!0,spacing:2,className:e.gridContainer,justify:"center",children:g.map((function(e,t){return Object(I.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,children:Object(I.jsx)(Nn,{requests:e,children:Object(I.jsx)(Yt.a,{children:Object(I.jsx)(Ve.a,{variant:"contained",size:"medium",color:"primary",onClick:function(){return f({request:e})},children:"Accept"})})})},t)}))}),Object(I.jsx)(An,{offering:h,handleClose:function(){return f(null)},onSave:function(e){var n;e.preventDefault();var r=new FormData(e.currentTarget);if(r.get("course")||h){var a={course_id:(null===(n=h.request)||void 0===n?void 0:n.course_id)||null,grade_received:r.get("gradeReceived")||null,professor_name:r.get("professorName")||null,year_taken:r.get("yearTaken")||null};b({variables:Object(j.a)({tutor_id:t.uid},a)}),d({variables:{request_id:h.request.request_id},onCompleted:function(){s()}})}},loading:m.loading})]})}var Gn=Object(Pn.a)({root:{minWidth:100},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function Vn(e){var t=e.reviews,n=Gn(),r=t.created_at;return Object(I.jsx)(Le.a,{className:n.root,children:Object(I.jsxs)(Me.a,{children:[Object(I.jsx)(Ye.a,{mb:1,container:!0,justifyContent:"space-between",alignItems:"center",direction:"row",children:Object(I.jsx)(ze.a,{variant:"h6",children:t.student.user.name})}),Object(I.jsx)(Lt.a,{value:t.stars,readOnly:!0,size:"small"}),Object(I.jsxs)(Ye.a,{container:!0,children:[Object(I.jsx)(Ye.a,{item:!0,mr:1,children:Object(I.jsx)(Un.a,{fontSize:"1",color:"primary"})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(ze.a,{color:"textSecondary",variant:"body2",children:new Date(r).toLocaleDateString()})})]}),Object(I.jsx)(Ye.a,{mt:1,container:!0,justifyContent:"space-between",alignItems:"center",direction:"row",children:Object(I.jsx)(ze.a,{variant:"body1",color:"textSecondary",children:t.comment})})]})})}var Yn=Object(Pn.a)({gridContainer:{paddingLeft:"60px",paddingRight:"60px",paddingTop:"35px",paddingBottom:"35px"}});function Ln(){var e=Yn(),t=r.useContext(q).currentUser,n=Object(rt.a)(Ut,{variables:{id:t.uid}}),a=n.loading,i=n.error,c=n.data;if(a)return Object(I.jsx)(P,{});if(i)return"".concat(i);var s=c.tutor_by_pk.reviews.map((function(e){return Object(j.a)({},e)}));return Object(I.jsx)(Ye.a,{container:!0,spacing:2,className:e.gridContainer,justify:"center",children:0===s.length?Object(I.jsx)(ze.a,{children:"You have not received any reviews yet"}):s.map((function(e,t){return Object(I.jsx)(Ye.a,{item:!0,xs:12,sm:6,md:4,children:Object(I.jsx)(Vn,{reviews:e})},t)}))})}function Bn(e){var t=e.page,n=Object(u.g)(),a=Object(We.a)(Se.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(j.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),i=Object(We.a)(Ie.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return{"& .MuiDrawer-paper":Object(j.a)({position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!n&&Object(xe.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),c=Object(Ne.a)(),s=Object(Ee.a)(c.breakpoints.up("sm")),o=r.useState(!0),d=Object(x.a)(o,2),l=d[0],b=d[1],m=r.useState(null),O=Object(x.a)(m,2),p=O[0],h=O[1],f=function(e){s?b(!l):h(null===p?e.currentTarget:null)},g=[["Appointments",Object(I.jsx)(pe.a,{})],["Profile",Object(I.jsx)(fe.a,{})],["Availability",Object(I.jsx)(hn.a,{})],["Reviews",Object(I.jsx)(fn.a,{})],["Requests",Object(I.jsx)(he.a,{})]];return Object(I.jsxs)(D.a,{sx:{display:"flex"},children:[Object(I.jsx)($e.a,{}),Object(I.jsx)(a,{position:"absolute",open:s&&l,children:Object(I.jsxs)(Ae.a,{sx:{pr:"24px"},children:[Object(I.jsx)(qe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:f,sx:Object(j.a)({marginRight:"36px"},s&&l&&{display:"none"}),children:Object(I.jsx)(Ce.a,{})}),Object(I.jsx)(ze.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:t})]})}),Object(I.jsxs)(i,{variant:"permanent",open:l,sx:Object(j.a)({},!s&&{display:"none"}),children:[Object(I.jsx)(Ae.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:Object(I.jsx)(qe.a,{onClick:f,children:Object(I.jsx)(_e.a,{})})}),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(Te.a,{children:[g.map((function(e,r){var a=Object(x.a)(e,2),i=a[0],c=a[1];return Object(I.jsxs)(De.a,{selected:t===i,button:!0,onClick:function(){n("/".concat(i.toLowerCase()),{replace:!0})},children:[Object(I.jsx)(Fe.a,{children:c}),Object(I.jsx)(Pe.a,{primary:i})]},r)})),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(De.a,{button:!0,onClick:function(){k.signOut(),localStorage.removeItem("li")},children:[Object(I.jsx)(Fe.a,{children:Object(I.jsx)(ye.a,{})}),Object(I.jsx)(Pe.a,{primary:"Log Out"})]})]})]}),Object(I.jsxs)(Re.a,{anchorEl:p,open:!s&&null!==p,onClose:function(){return h(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[g.map((function(e,r){var a=Object(x.a)(e,2),i=a[0],c=a[1];return Object(I.jsxs)(Ue.a,{selected:t===i,onClick:function(){n("/".concat(i.toLowerCase()),{replace:!0}),h(null)},children:[Object(I.jsx)(Fe.a,{children:c}),i]},r)})),Object(I.jsx)(ke.a,{}),Object(I.jsxs)(Ue.a,{onClick:function(){k.signOut(),localStorage.removeItem("li")},children:[Object(I.jsx)(Fe.a,{children:Object(I.jsx)(ye.a,{})}),"Log Out"]})]}),Object(I.jsxs)(D.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[Object(I.jsx)(Ae.a,{}),"Appointments"===t?Object(I.jsx)(Jt,{}):"Profile"===t?Object(I.jsx)(Dn,{}):"Availability"===t?Object(I.jsx)(Sn,{}):"Reviews"===t?Object(I.jsx)(Ln,{}):Object(I.jsx)(En,{})]})]})}function Mn(e){var t=e.page,n=r.useContext(q).userType;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Oe.a,{children:Object(I.jsx)("title",{children:t})}),"student"===n.current?Object(I.jsx)(pn,{page:t}):Object(I.jsx)(Bn,{page:t})]})}var Hn=n(451);function Qn(){var e=Object(u.g)(),t=r.useContext(q),n=t.currentUser,a=t.userType,i=Object(at.a)(Ot,{variables:{tutor_id:n.uid},onCompleted:function(){a.current="tutor",e("/profile")}}),c=Object(x.a)(i,1)[0],s=Object(at.a)(xt,{variables:{student_id:n.uid},onCompleted:function(){a.current="student",e("/offerings")}}),o=Object(x.a)(s,1)[0];return Object(I.jsx)(D.a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:Object(I.jsxs)(Yt.a,{spacing:4,children:[Object(I.jsx)(ze.a,{children:"What do you plan on doing on this platform?"}),Object(I.jsxs)(Ye.a,{container:!0,justifyContent:"space-between",children:[Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(Le.a,{onClick:c,children:Object(I.jsx)(Hn.a,{children:Object(I.jsx)(Me.a,{children:Object(I.jsx)(ze.a,{children:"Teaching"})})})})}),Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(Le.a,{onClick:o,children:Object(I.jsx)(Hn.a,{children:Object(I.jsx)(Me.a,{children:Object(I.jsx)(ze.a,{children:"Learning"})})})})})]})]})})}var Jn=n(167),Kn=n.n(Jn),Xn=n(432);function Zn(){var e=Object(u.g)(),t=Object(u.f)();return Object(I.jsxs)(nn.a,{component:"main",maxWidth:"xs",children:[Object(I.jsx)($e.a,{}),Object(I.jsx)(Oe.a,{children:Object(I.jsx)("title",{children:"Sign In"})}),Object(I.jsxs)(D.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(Xn.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(I.jsx)(Kn.a,{})}),Object(I.jsx)(ze.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(I.jsxs)(D.a,{component:"form",onSubmit:function(n){n.preventDefault();var r=new FormData(n.currentTarget),a=r.get("email"),i=r.get("password");Object(S.c)(k,a,i).then((function(){var n,r,a=(null===(n=t.state)||void 0===n||null===(r=n.from)||void 0===r?void 0:r.pathname)||"/";e(a,{replace:!0})})).catch((function(e){var t=e.message;console.log(t)}))},noValidate:!0,sx:{mt:1},children:[Object(I.jsx)(dt.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(I.jsx)(dt.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(I.jsx)(Ve.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(I.jsx)(Ye.a,{container:!0,children:Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(l.b,{to:"/signup",children:Object(I.jsx)(ze.a,{variant:"body2",children:"Don't have an account? Sign Up"})})})})]})]})]})}function er(){var e=Object(u.g)();return Object(I.jsxs)(nn.a,{component:"main",maxWidth:"xs",children:[Object(I.jsx)($e.a,{}),Object(I.jsx)(Oe.a,{children:Object(I.jsx)("title",{children:"Sign Up"})}),Object(I.jsxs)(D.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(I.jsx)(Xn.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(I.jsx)(Kn.a,{})}),Object(I.jsx)(ze.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(I.jsxs)(D.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget),r=n.get("email"),a=n.get("password");Object(S.a)(k,r,a).then((function(){e("/onboarding")})).catch((function(e){var t=e.message;console.log("error ",t)}))},sx:{mt:3},children:[Object(I.jsxs)(Ye.a,{container:!0,spacing:2,children:[Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsx)(dt.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(I.jsx)(Ye.a,{item:!0,xs:12,children:Object(I.jsx)(dt.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(I.jsx)(Ve.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(I.jsx)(Ye.a,{container:!0,justifyContent:"flex-end",children:Object(I.jsx)(Ye.a,{item:!0,children:Object(I.jsx)(l.b,{to:"/signin",children:Object(I.jsx)(ze.a,{variant:"body2",children:"Already have an account? Sign in"})})})})]})]})]})}var tr=Object(o.a)({palette:{primary:{main:s.a[600]}}});function nr(){return Object(I.jsx)(d.a,{theme:tr,children:Object(I.jsx)(T,{children:Object(I.jsxs)(l.a,{children:[Object(I.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),Object(I.jsxs)(u.d,{children:[Object(I.jsx)(u.b,{path:"/",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Appointments"})})})}),Object(I.jsx)(u.b,{path:"/profile",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Profile"})})})}),Object(I.jsx)(u.b,{path:"/appointments",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Appointments"})})})}),Object(I.jsx)(u.b,{path:"/requests",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Requests"})})})}),Object(I.jsx)(u.b,{path:"/reviews",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Reviews"})})})}),Object(I.jsx)(u.b,{path:"/availability",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Availability"})})})}),Object(I.jsx)(u.b,{path:"/offerings",element:Object(I.jsx)(U,{children:Object(I.jsx)(W,{children:Object(I.jsx)(Mn,{page:"Offerings"})})})}),Object(I.jsx)(u.b,{path:"signup",element:Object(I.jsx)(R,{children:Object(I.jsx)(er,{})})}),Object(I.jsx)(u.b,{path:"signin",element:Object(I.jsx)(R,{children:Object(I.jsx)(Zn,{})})}),Object(I.jsx)(u.b,{path:"/onboarding",element:Object(I.jsx)(U,{children:Object(I.jsx)(Qn,{})})}),Object(I.jsx)(u.b,{path:"*",element:Object(I.jsx)("div",{children:"404"})})]})]})})})}var rr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,453)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(I.jsx)(nr,{}),document.getElementById("root")),rr()}},[[309,1,2]]]);
//# sourceMappingURL=main.b70b4169.chunk.js.map